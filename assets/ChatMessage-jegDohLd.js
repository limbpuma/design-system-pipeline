import{j as e}from"./jsx-runtime-DF2Pcvd1.js";import{r as M}from"./index-B2-qRKKC.js";import{c as s,a as j}from"./utils-JCLedEej.js";const f=j("relative max-w-[80%] transition-all duration-200",{variants:{role:{user:"ml-auto",assistant:"mr-auto",system:"mx-auto max-w-[90%]"}},defaultVariants:{role:"user"}}),g=j("relative px-4 py-3 rounded-2xl transition-all duration-200",{variants:{role:{user:["bg-gradient-to-br from-blue-600 to-blue-700","text-white","rounded-br-md","shadow-lg shadow-blue-500/20"],assistant:["bg-white dark:bg-slate-800","text-slate-900 dark:text-slate-100","rounded-bl-md","border border-slate-200 dark:border-slate-700","shadow-sm"],system:["bg-amber-50 dark:bg-amber-900/20","text-amber-900 dark:text-amber-100","border border-amber-200 dark:border-amber-800/50","text-center text-sm"]},size:{sm:"text-sm px-3 py-2",md:"text-base px-4 py-3",lg:"text-lg px-5 py-4"}},defaultVariants:{role:"user",size:"md"}}),V=()=>e.jsx("div",{className:"flex items-center gap-1 py-1",role:"status","aria-label":"Assistant is typing",children:[0,1,2].map(a=>e.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400 dark:bg-slate-500 animate-bounce",style:{animationDelay:`${a*150}ms`,animationDuration:"600ms"},"aria-hidden":"true"},a))}),q=()=>e.jsx("span",{className:"inline-flex ml-0.5","aria-hidden":"true",children:e.jsx("span",{className:"w-0.5 h-5 bg-current animate-pulse rounded-full"})}),C=({className:a})=>e.jsx("div",{className:s("w-10 h-10 rounded-xl","bg-gradient-to-br from-violet-500 to-blue-600","flex items-center justify-center","shadow-lg shadow-violet-500/30",a),children:e.jsx("svg",{className:"w-5 h-5 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z"})})}),_=({src:a,name:r,className:t})=>e.jsx("div",{className:s("w-10 h-10 rounded-xl overflow-hidden","bg-slate-200 dark:bg-slate-700","flex items-center justify-center","ring-2 ring-white dark:ring-slate-900",t),children:a?e.jsx("img",{src:a,alt:r||"User",className:"w-full h-full object-cover"}):e.jsx("svg",{className:"w-5 h-5 text-slate-500 dark:text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})})}),z=({status:a})=>{const r={online:"bg-emerald-500",offline:"bg-slate-400",away:"bg-amber-500",busy:"bg-red-500"};return e.jsx("span",{className:s("absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full","border-2 border-white dark:border-slate-900",r[a]),role:"status","aria-label":`Status: ${a}`})},A=({status:a})=>a==="sending"?e.jsxs("svg",{className:"w-3.5 h-3.5 text-slate-400 animate-spin",viewBox:"0 0 24 24","aria-hidden":"true",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):a==="sent"?e.jsx("svg",{className:"w-3.5 h-3.5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):a==="delivered"?e.jsx("svg",{className:"w-4 h-4 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7M5 19l4 4L19 13"})}):a==="read"?e.jsx("svg",{className:"w-4 h-4 text-blue-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7M5 19l4 4L19 13"})}):a==="error"?e.jsx("svg",{className:"w-3.5 h-3.5 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):null,B=({reactions:a,onReactionClick:r,isUser:t})=>a!=null&&a.length?e.jsx("div",{className:s("flex flex-wrap gap-1 mt-2",t&&"justify-end"),role:"group","aria-label":"Message reactions",children:a.map(({emoji:i,count:l,reacted:o})=>e.jsxs("button",{onClick:()=>r==null?void 0:r(i),className:s("inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium","transition-all duration-200 hover:scale-105 active:scale-95",o?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 ring-1 ring-blue-300 dark:ring-blue-700":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"),"aria-label":`${o?"Remove":"Add"} ${i} reaction, ${l} total`,"aria-pressed":o,children:[e.jsx("span",{"aria-hidden":"true",children:i}),e.jsx("span",{children:l})]},i))}):null,S=({children:a,position:r,visible:t})=>e.jsx("div",{className:s("absolute top-1/2 -translate-y-1/2 z-10","flex items-center gap-1 p-1","bg-white dark:bg-slate-800 rounded-lg","shadow-lg border border-slate-200 dark:border-slate-700","transition-all duration-200",r==="left"?"-left-2 -translate-x-full":"-right-2 translate-x-full",t?"opacity-100 visible":"opacity-0 invisible group-hover:opacity-100 group-hover:visible group-focus-within:opacity-100 group-focus-within:visible"),children:a}),v=({icon:a,label:r,onClick:t})=>e.jsx("button",{onClick:t,className:s("p-1.5 rounded-md","text-slate-500 dark:text-slate-400","hover:text-slate-700 dark:hover:text-slate-200","hover:bg-slate-100 dark:hover:bg-slate-700","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","transition-colors duration-200"),"aria-label":r,children:a});function b({content:a,role:r,timestamp:t,avatar:i,senderName:l,isStreaming:o=!1,isTyping:k=!1,status:d,onlineStatus:m,error:u,actions:x,actionsOnHover:y=!0,reactions:w,onReactionClick:N,size:p,className:h}){const c=M.useMemo(()=>{if(!t)return null;const L=typeof t=="string"?new Date(t):t;return new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric"}).format(L)},[t]);if(r==="system")return e.jsx("div",{className:s(f({role:r}),"animate-in fade-in slide-in-from-top-2 duration-300",h),role:"status",children:e.jsx("div",{className:s(g({role:r,size:p})),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-amber-600 dark:text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:a})]})})});const n=r==="user";return e.jsxs("article",{className:s(f({role:r}),"flex gap-3 group","animate-in fade-in slide-in-from-bottom-2 duration-300",n?"flex-row-reverse":"flex-row",h),"aria-label":`Message from ${l||r}`,children:[e.jsxs("div",{className:"relative flex-shrink-0 self-end",children:[n?e.jsx(_,{src:i,name:l}):e.jsx(C,{}),m&&e.jsx(z,{status:m})]}),e.jsxs("div",{className:s("flex flex-col gap-1 min-w-0",n?"items-end":"items-start"),children:[(l||c)&&e.jsxs("div",{className:s("flex items-center gap-2 text-xs px-1",n&&"flex-row-reverse"),children:[l&&e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:l}),c&&e.jsx("time",{dateTime:t==null?void 0:t.toString(),className:"text-slate-400 dark:text-slate-500",children:c})]}),e.jsxs("div",{className:"relative",children:[x&&e.jsx(S,{position:n?"left":"right",visible:!y,children:x}),e.jsx("div",{className:s(g({role:r,size:p}),"group-hover:shadow-md",u&&"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800/50"),children:k?e.jsx(V,{}):u?e.jsxs("div",{className:"flex items-start gap-2 text-red-600 dark:text-red-400",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Error"}),e.jsx("p",{className:"text-sm mt-0.5",children:u})]})]}):e.jsxs("div",{className:s("prose prose-sm max-w-none break-words",n?"prose-invert":"prose-slate dark:prose-invert"),children:[a,o&&e.jsx(q,{})]})}),e.jsx(B,{reactions:w||[],onReactionClick:N,isUser:n})]}),n&&d&&e.jsxs("div",{className:"flex items-center gap-1 px-1",children:[e.jsx(A,{status:d}),e.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 capitalize",children:d==="read"?"Seen":d})]})]})]})}try{b.displayName="ChatMessage",b.__docgenInfo={description:"",displayName:"ChatMessage",props:{content:{defaultValue:null,description:"Message content",name:"content",required:!0,type:{name:"ReactNode"}},role:{defaultValue:null,description:"Role of the message sender",name:"role",required:!0,type:{name:"enum",value:[{value:'"user"'},{value:'"assistant"'},{value:'"system"'}]}},timestamp:{defaultValue:null,description:"Timestamp",name:"timestamp",required:!1,type:{name:"string | Date"}},avatar:{defaultValue:null,description:"Avatar URL",name:"avatar",required:!1,type:{name:"string"}},senderName:{defaultValue:null,description:"Sender name",name:"senderName",required:!1,type:{name:"string"}},isStreaming:{defaultValue:{value:"false"},description:"Message is being streamed",name:"isStreaming",required:!1,type:{name:"boolean"}},isTyping:{defaultValue:{value:"false"},description:"Show typing indicator",name:"isTyping",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"Delivery status",name:"status",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"sending"'},{value:'"sent"'},{value:'"delivered"'},{value:'"read"'}]}},onlineStatus:{defaultValue:null,description:"Online status for avatar",name:"onlineStatus",required:!1,type:{name:"enum",value:[{value:'"online"'},{value:'"offline"'},{value:'"away"'},{value:'"busy"'}]}},error:{defaultValue:null,description:"Error message",name:"error",required:!1,type:{name:"string"}},actions:{defaultValue:null,description:"Action buttons",name:"actions",required:!1,type:{name:"ReactNode"}},actionsOnHover:{defaultValue:{value:"true"},description:"Show actions on hover",name:"actionsOnHover",required:!1,type:{name:"boolean"}},reactions:{defaultValue:null,description:"Reactions",name:"reactions",required:!1,type:{name:"{ emoji: string; count: number; reacted?: boolean; }[]"}},onReactionClick:{defaultValue:null,description:"Reaction click handler",name:"onReactionClick",required:!1,type:{name:"((emoji: string) => void)"}},className:{defaultValue:null,description:"Additional class",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:'"sm" | "md" | "lg" | null'}}}}}catch{}try{v.displayName="MessageActionButton",v.__docgenInfo={description:"",displayName:"MessageActionButton",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"ReactNode"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}}}catch{}export{b as C,v as M};
