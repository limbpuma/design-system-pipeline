import{j as e}from"./jsx-runtime-DF2Pcvd1.js";import{r as S}from"./index-B2-qRKKC.js";import{c as o,a as pe}from"./utils-JCLedEej.js";import"./_commonjsHelpers-Cpj98o6Y.js";const ge=pe("relative rounded-2xl transition-all duration-300 overflow-hidden",{variants:{variant:{default:["border-2 border-dashed","border-slate-300 dark:border-slate-600","bg-slate-50/50 dark:bg-slate-800/50","hover:border-slate-400 dark:hover:border-slate-500","hover:bg-slate-100/50 dark:hover:bg-slate-700/50"],elevated:["border border-slate-200 dark:border-slate-700","bg-white dark:bg-slate-900","shadow-lg shadow-slate-200/50 dark:shadow-slate-900/50","hover:shadow-xl hover:border-slate-300 dark:hover:border-slate-600"],minimal:["border border-dashed border-slate-200 dark:border-slate-700","bg-transparent","hover:bg-slate-50 dark:hover:bg-slate-800/50"]},size:{sm:"p-4",md:"p-8",lg:"p-12"}},defaultVariants:{variant:"default",size:"md"}}),F=r=>{if(r===0)return"0 B";const s=1024,n=["B","KB","MB","GB"],l=Math.floor(Math.log(r)/Math.log(s));return`${parseFloat((r/Math.pow(s,l)).toFixed(1))} ${n[l]}`},he=({isActive:r,className:s})=>e.jsxs("div",{className:o("relative w-16 h-16 rounded-2xl flex items-center justify-center transition-all duration-300",r?"bg-gradient-to-br from-blue-500 to-violet-600 text-white scale-110 shadow-xl shadow-blue-500/30":"bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-800 text-slate-400 dark:text-slate-500",s),children:[e.jsx("svg",{className:o("w-7 h-7 transition-transform duration-300",r&&"animate-bounce"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),r&&e.jsx("span",{className:"absolute inset-0 rounded-2xl bg-blue-400/30 animate-ping","aria-hidden":"true"})]}),xe=({progress:r,size:s=44})=>{const l=(s-3)/2,d=l*2*Math.PI,c=d-r/100*d;return e.jsxs("div",{className:"relative",style:{width:s,height:s},children:[e.jsxs("svg",{width:s,height:s,className:"transform -rotate-90","aria-hidden":"true",children:[e.jsx("circle",{cx:s/2,cy:s/2,r:l,fill:"none",stroke:"currentColor",strokeWidth:3,className:"text-white/30"}),e.jsx("circle",{cx:s/2,cy:s/2,r:l,fill:"none",stroke:"currentColor",strokeWidth:3,strokeDasharray:d,strokeDashoffset:c,strokeLinecap:"round",className:"text-white transition-all duration-300"})]}),e.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white",children:[r,"%"]})]})},fe=({image:r,onRemove:s})=>e.jsxs("div",{className:o("relative group aspect-square rounded-xl overflow-hidden","bg-slate-100 dark:bg-slate-800","ring-1 ring-slate-200 dark:ring-slate-700","transition-all duration-200","hover:ring-2 hover:ring-blue-400 dark:hover:ring-blue-500","hover:shadow-lg hover:scale-[1.02]","animate-in fade-in zoom-in-95 duration-300"),children:[e.jsx("img",{src:r.preview,alt:`Preview of ${r.file.name}`,className:"w-full h-full object-cover"}),r.status==="uploading"&&e.jsxs("div",{className:"absolute inset-0 bg-slate-900/70 backdrop-blur-sm flex flex-col items-center justify-center gap-2",children:[e.jsx(xe,{progress:r.progress}),e.jsx("span",{className:"text-white text-xs font-medium",children:"Uploading..."})]}),r.status==="error"&&e.jsxs("div",{className:"absolute inset-0 bg-red-500/90 backdrop-blur-sm flex flex-col items-center justify-center p-3",children:[e.jsx("svg",{className:"w-8 h-8 text-white mb-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),e.jsx("p",{className:"text-white text-xs text-center font-medium",children:r.error||"Upload failed"})]}),r.status==="complete"&&e.jsx("div",{className:o("absolute top-2 right-2 w-7 h-7 rounded-full","bg-emerald-500 shadow-lg shadow-emerald-500/50","flex items-center justify-center","animate-in zoom-in duration-300"),children:e.jsx("svg",{className:"w-4 h-4 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),s()},className:o("absolute top-2 left-2 w-8 h-8 rounded-full","bg-slate-900/60 backdrop-blur-sm text-white","opacity-0 group-hover:opacity-100","hover:bg-red-500 hover:scale-110","focus:opacity-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-white","transition-all duration-200","flex items-center justify-center"),"aria-label":`Remove ${r.file.name}`,children:e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:o("absolute inset-x-0 bottom-0","bg-gradient-to-t from-slate-900/90 via-slate-900/60 to-transparent","px-3 py-3 pt-8","opacity-0 group-hover:opacity-100","transition-opacity duration-200"),children:[e.jsx("p",{className:"text-white text-sm font-medium truncate",children:r.file.name}),e.jsx("p",{className:"text-white/70 text-xs",children:F(r.file.size)})]})]});function L({images:r,onFilesSelected:s,onRemove:n,maxImages:l=10,maxFileSize:d=10*1024*1024,acceptedTypes:c=["image/jpeg","image/png","image/webp","image/gif"],placeholder:g,showInstructions:i=!0,disabled:t=!1,error:f,variant:U,size:h,className:oe}){const M=S.useRef(null),[b,z]=S.useState(!1),[V,C]=S.useState(null),v=r.length<l,ne=r.filter(a=>a.status==="complete").length,q=r.filter(a=>a.status==="uploading").length,ie=a=>{const u=[],m=[];for(const x of a){if(!c.includes(x.type)){m.push(`${x.name}: Unsupported format`);continue}if(x.size>d){m.push(`${x.name}: Exceeds ${F(d)} limit`);continue}if(r.length+u.length>=l){m.push(`Maximum ${l} images allowed`);break}u.push(x)}return{valid:u,errors:m}},B=a=>{if(!a||t)return;const{valid:u,errors:m}=ie(Array.from(a));m.length>0?(C(m.join(". ")),setTimeout(()=>C(null),5e3)):C(null),u.length>0&&s(u)},de=a=>{a.preventDefault(),!t&&v&&z(!0)},ce=a=>{a.preventDefault(),z(!1)},ue=a=>{a.preventDefault(),z(!1),B(a.dataTransfer.files)},E=()=>{var a;!t&&v&&((a=M.current)==null||a.click())},me=a=>{var u;(a.key==="Enter"||a.key===" ")&&!t&&v&&(a.preventDefault(),(u=M.current)==null||u.click())},R=f||V;return e.jsxs("div",{className:o("space-y-4",oe),children:[e.jsxs("div",{className:o(ge({variant:U,size:h}),"cursor-pointer focus:outline-none","focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",b&&["border-blue-500 dark:border-blue-400","bg-blue-50/80 dark:bg-blue-900/30","scale-[1.01]","shadow-xl shadow-blue-500/20"],R&&["border-red-400 dark:border-red-500","bg-red-50/50 dark:bg-red-900/10"],t&&"opacity-50 cursor-not-allowed"),onDragOver:de,onDragLeave:ce,onDrop:ue,onClick:E,onKeyDown:me,tabIndex:t?-1:0,role:"button","aria-label":`Upload images. ${r.length} of ${l} images uploaded.`,"aria-disabled":t,children:[e.jsx("input",{ref:M,type:"file",accept:c.join(","),multiple:!0,onChange:a=>B(a.target.files),className:"hidden",disabled:t,"aria-hidden":"true"}),g||e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-5",children:e.jsx(he,{isActive:b})}),e.jsx("p",{className:o("text-lg font-semibold transition-colors duration-200 mb-2",b?"text-blue-600 dark:text-blue-400":"text-slate-700 dark:text-slate-200"),children:b?"Drop your images here":"Drag & drop images here"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["or ",e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium hover:underline",children:"browse files"})]}),i&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:c.map(a=>e.jsx("span",{className:o("px-2.5 py-1 rounded-lg text-xs font-medium","bg-slate-100 dark:bg-slate-800","text-slate-600 dark:text-slate-400","border border-slate-200 dark:border-slate-700"),children:a.split("/")[1].toUpperCase()},a))}),e.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Max ",F(d)," per file Â· Up to ",l," images"]}),r.length>0&&e.jsxs("div",{className:"flex items-center justify-center gap-4 pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500","aria-hidden":"true"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[ne," uploaded"]})]}),q>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 animate-pulse","aria-hidden":"true"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[q," uploading"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-slate-300 dark:bg-slate-600","aria-hidden":"true"}),e.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[l-r.length," slots left"]})]})]})]})]})]}),R&&e.jsxs("div",{className:o("flex items-start gap-3 px-4 py-3 rounded-xl","bg-red-50 dark:bg-red-900/20","border border-red-200 dark:border-red-800/50","animate-in slide-in-from-top-2 duration-300"),role:"alert",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:f||V})]}),r.length>0&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[r.map(a=>e.jsx(fe,{image:a,onRemove:()=>n(a.id)},a.id)),v&&e.jsxs("button",{onClick:E,disabled:t,className:o("aspect-square rounded-xl","border-2 border-dashed border-slate-200 dark:border-slate-700","bg-slate-50/50 dark:bg-slate-800/50","hover:border-blue-400 dark:hover:border-blue-500","hover:bg-blue-50/50 dark:hover:bg-blue-900/20","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","flex flex-col items-center justify-center gap-2","transition-all duration-200","group",t&&"opacity-50 cursor-not-allowed"),"aria-label":"Add more images",children:[e.jsx("div",{className:o("w-10 h-10 rounded-xl","bg-slate-200 dark:bg-slate-700","group-hover:bg-blue-100 dark:group-hover:bg-blue-900/50","flex items-center justify-center","transition-colors duration-200"),children:e.jsx("svg",{className:"w-5 h-5 text-slate-400 group-hover:text-blue-500 transition-colors",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),e.jsx("span",{className:"text-xs font-medium text-slate-500 group-hover:text-blue-500 transition-colors",children:"Add more"})]})]})]})}try{L.displayName="ImageUploader",L.__docgenInfo={description:"",displayName:"ImageUploader",props:{images:{defaultValue:null,description:"Currently uploaded images",name:"images",required:!0,type:{name:"UploadedImage[]"}},onFilesSelected:{defaultValue:null,description:"File selection handler",name:"onFilesSelected",required:!0,type:{name:"(files: File[]) => void"}},onRemove:{defaultValue:null,description:"Image removal handler",name:"onRemove",required:!0,type:{name:"(id: string) => void"}},maxImages:{defaultValue:{value:"10"},description:"Maximum images allowed",name:"maxImages",required:!1,type:{name:"number"}},maxFileSize:{defaultValue:{value:"10 * 1024 * 1024"},description:"Maximum file size in bytes",name:"maxFileSize",required:!1,type:{name:"number"}},acceptedTypes:{defaultValue:{value:"['image/jpeg', 'image/png', 'image/webp', 'image/gif']"},description:"Accepted file types",name:"acceptedTypes",required:!1,type:{name:"string[]"}},placeholder:{defaultValue:null,description:"Custom placeholder",name:"placeholder",required:!1,type:{name:"ReactNode"}},showInstructions:{defaultValue:{value:"true"},description:"Show file type instructions",name:"showInstructions",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Disabled state",name:"disabled",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"Error message",name:"error",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Additional class",name:"className",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:'"default" | "elevated" | "minimal" | null'}},size:{defaultValue:{value:"44"},description:"",name:"size",required:!1,type:{name:'"sm" | "md" | "lg" | null'}}}}}catch{}const we={title:"AI Blocks/ImageUploader",component:L,parameters:{layout:"padded"},tags:["autodocs"],argTypes:{variant:{control:"select",options:["default","elevated"]},size:{control:"select",options:["sm","md","lg"]}}},p=r=>{const[s,n]=S.useState([]),l=c=>{const g=c.map((i,t)=>({id:`${Date.now()}-${t}`,file:i,preview:URL.createObjectURL(i),progress:0,status:"pending"}));n(i=>[...i,...g]),g.forEach(i=>{let t=0;const f=setInterval(()=>{t+=10,n(U=>U.map(h=>h.id===i.id?{...h,progress:t,status:t<100?"uploading":"complete"}:h)),t>=100&&clearInterval(f)},200)})},d=c=>{n(g=>g.filter(i=>i.id!==c))};return e.jsx(L,{...r,images:s,onFilesSelected:l,onRemove:d})},j={render:r=>e.jsx(p,{...r}),args:{maxImages:5,maxFileSize:10*1024*1024}},k={render:r=>e.jsx(p,{...r}),args:{variant:"elevated",maxImages:3}},w={render:r=>e.jsx(p,{...r}),args:{maxImages:1}},N={render:r=>e.jsx(p,{...r}),args:{disabled:!0}},y={render:r=>e.jsx(p,{...r}),args:{error:"File size exceeds 10MB limit"}},I={render:r=>e.jsx(p,{...r}),args:{size:"sm",maxImages:3}},D={render:r=>e.jsx(p,{...r}),args:{size:"lg",maxImages:10}};var W,$,_;j.parameters={...j.parameters,docs:{...(W=j.parameters)==null?void 0:W.docs,source:{originalSource:`{
  render: args => <ImageUploaderDemo {...args} />,
  args: {
    maxImages: 5,
    maxFileSize: 10 * 1024 * 1024
  }
}`,...(_=($=j.parameters)==null?void 0:$.docs)==null?void 0:_.source}}};var A,O,P;k.parameters={...k.parameters,docs:{...(A=k.parameters)==null?void 0:A.docs,source:{originalSource:`{
  render: args => <ImageUploaderDemo {...args} />,
  args: {
    variant: 'elevated',
    maxImages: 3
  }
}`,...(P=(O=k.parameters)==null?void 0:O.docs)==null?void 0:P.source}}};var H,K,T;w.parameters={...w.parameters,docs:{...(H=w.parameters)==null?void 0:H.docs,source:{originalSource:`{
  render: args => <ImageUploaderDemo {...args} />,
  args: {
    maxImages: 1
  }
}`,...(T=(K=w.parameters)==null?void 0:K.docs)==null?void 0:T.source}}};var G,J,Q;N.parameters={...N.parameters,docs:{...(G=N.parameters)==null?void 0:G.docs,source:{originalSource:`{
  render: args => <ImageUploaderDemo {...args} />,
  args: {
    disabled: true
  }
}`,...(Q=(J=N.parameters)==null?void 0:J.docs)==null?void 0:Q.source}}};var X,Y,Z;y.parameters={...y.parameters,docs:{...(X=y.parameters)==null?void 0:X.docs,source:{originalSource:`{
  render: args => <ImageUploaderDemo {...args} />,
  args: {
    error: 'File size exceeds 10MB limit'
  }
}`,...(Z=(Y=y.parameters)==null?void 0:Y.docs)==null?void 0:Z.source}}};var ee,re,ae;I.parameters={...I.parameters,docs:{...(ee=I.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  render: args => <ImageUploaderDemo {...args} />,
  args: {
    size: 'sm',
    maxImages: 3
  }
}`,...(ae=(re=I.parameters)==null?void 0:re.docs)==null?void 0:ae.source}}};var se,te,le;D.parameters={...D.parameters,docs:{...(se=D.parameters)==null?void 0:se.docs,source:{originalSource:`{
  render: args => <ImageUploaderDemo {...args} />,
  args: {
    size: 'lg',
    maxImages: 10
  }
}`,...(le=(te=D.parameters)==null?void 0:te.docs)==null?void 0:le.source}}};const Ne=["Default","Elevated","SingleFile","Disabled","WithError","SmallSize","LargeSize"];export{j as Default,N as Disabled,k as Elevated,D as LargeSize,w as SingleFile,I as SmallSize,y as WithError,Ne as __namedExportsOrder,we as default};
